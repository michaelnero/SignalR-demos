var App=(function(){var c=["rgb(158, 11, 15)","rgb(160, 65, 13)","rgb(163, 98, 10)","rgb(171, 160, 0)","rgb(89, 133, 39)","rgb(25, 123, 48)","rgb(0, 114, 54)","rgb(0, 116, 107)","rgb(0, 74, 128)","rgb(0, 52, 113)"];function b(e){e.removeClass("disabled").removeAttr("disabled")}function a(e){e.addClass("disabled").attr("disabled","disabled")}function d(){var l=this;var f=6;var o=null;var e=null;var n=null;var k=null;this.fps=ko.observable(32);this.q=ko.observable(20);this.n=ko.observable(500);this.start=function(){a($("#start"));var p=m();var q=g(p);h(function(){o.server.start(l.fps(),l.q(),q.x,q.y,l.n())})};function m(){e=document.getElementById("virus-canvas");var q=$(window).width();var p=$(window).height();e.style.width=q+"px";e.style.height=p+"px";e.width=e.offsetWidth;e.height=e.offsetHeight;n=new createjs.Stage(e);k=new createjs.Shape();n.addChild(k);k.cache(0,0,e.width,e.height);return{width:q,height:p}}function g(p){var q=Math.floor(p.width/f);var r=Math.floor(p.height/f);return{x:q,y:r}}function h(p){if(!o){$.connection.hub.url="http://localhost:10533/signalr";o=$.connection.virus;o.client.updateGrid=j;o.client.notifyDone=i;var q=false;var r=window.setTimeout(function(){$("#connecting-modal").modal("show");q=true},1000);$.connection.hub.start().done(function(){window.clearTimeout(r);if(q){$("#connecting-modal").modal("hide")}p()}).fail(function(){window.clearTimeout(r);window.alert("Could not connect to hub!")})}else{p()}}function j(q){for(var r=0;r<q.length;r++){var p=q[r];var s=c[(p.state-1)%10];k.graphics.beginFill(s).rect(p.x*(f+1),p.y*(f+1),f,f)}k.updateCache("source-overlay");k.graphics.clear();n.update()}function i(){b($("#start"))}}return{init:function(){var e=new d();ko.applyBindings(e);b($("#start"))}}})();